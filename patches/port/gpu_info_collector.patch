# Description: Override the default GPU info collector on Linux
# Author: Chris Coulson <chris.coulson@canonical.com>

diff --git a/gpu/gpu_config.gypi b/gpu/gpu_config.gypi
--- a/gpu/gpu_config.gypi
+++ b/gpu/gpu_config.gypi
@@ -5,16 +5,17 @@
 {
   'dependencies': [
     '../third_party/re2/re2.gyp:re2',
     '../base/base.gyp:base',
     '../ui/gl/gl.gyp:gl',
   ],
   'include_dirs': [
     '..',
+    '<(DEPTH)/../../..',
   ],
   'sources': [
     'config/dx_diag_node.cc',
     'config/dx_diag_node.h',
     'config/gpu_blacklist.cc',
     'config/gpu_blacklist.h',
     'config/gpu_control_list.cc',
     'config/gpu_control_list.h',
@@ -25,29 +26,31 @@
     'config/gpu_driver_bug_workaround_type.h',
     'config/gpu_dx_diagnostics_win.cc',
     'config/gpu_feature_type.h',
     'config/gpu_info.cc',
     'config/gpu_info.h',
     'config/gpu_info_collector.cc',
     'config/gpu_info_collector.h',
     'config/gpu_info_collector_android.cc',
-    'config/gpu_info_collector_linux.cc',
-    'config/gpu_info_collector_linux.h',
+    #'config/gpu_info_collector_linux.cc',
+    #'config/gpu_info_collector_linux.h',
     'config/gpu_info_collector_mac.mm',
     'config/gpu_info_collector_ozone.cc',
     'config/gpu_info_collector_win.cc',
     'config/gpu_info_collector_x11.cc',
     'config/gpu_test_config.cc',
     'config/gpu_test_config.h',
     'config/gpu_test_expectations_parser.cc',
     'config/gpu_test_expectations_parser.h',
     'config/gpu_util.cc',
     'config/gpu_util.h',
     'config/software_rendering_list_json.cc',
+    '../../../../shared/port/gpu_config/gpu_info_collector_oxide_linux.cc',
+    '../../../../shared/port/gpu_config/gpu_info_collector_oxide_linux.h',
   ],
   'conditions': [
     ['OS=="win"', {
       'dependencies': [
         '../third_party/libxml/libxml.gyp:libxml',
       ],
       'link_settings': {
         'libraries': [

<html>
<body>
  <h1>geolocation</h1>
  <div id="location"></div>
  <script>
    function report_result(result) {
      document.querySelector('#location').innerHTML = result;
    }

    function success(position) {
      report_result('OK');
    }

    function error(err) {
      if (err.code === 1) {
        report_result('PERMISSION DENIED');
      } else if (err.code === 2) {
        report_result('POSITION UNAVAILABLE');
      } else if (err.code === 3) {
        report_result('TIMEOUT');
      }
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success, error, { timeout: 3000});
    } else {
      report_result('NOT SUPPORTED');
    }
  </script>
</body>
</html>
